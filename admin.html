<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드 | 한국GPT협회</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="admin-body">
    <!-- 관리자 헤더 -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-brand">
                <h1><a href="admin.html">한국GPT협회 관리자</a></h1>
            </div>
            <div class="admin-nav">
                <div class="admin-user">
                    <span>관리자님</span>
                    <div class="admin-dropdown">
                        <button class="dropdown-toggle">
                            <i class="fas fa-user-circle"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="#" class="dropdown-item">내 정보</a>
                            <a href="#" class="dropdown-item">설정</a>
                            <div class="dropdown-divider"></div>
                            <a href="index.html" class="dropdown-item">사이트 보기</a>
                            <a href="#" class="dropdown-item">로그아웃</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="admin-layout">
        <!-- 사이드바 -->
        <aside class="admin-sidebar">
            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li class="nav-item active">
                        <a href="#dashboard" class="nav-link" data-section="dashboard">
                            <i class="fas fa-chart-line"></i>
                            <span>대시보드</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#courses" class="nav-link" data-section="courses">
                            <i class="fas fa-graduation-cap"></i>
                            <span>강의 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#orders" class="nav-link" data-section="orders">
                            <i class="fas fa-shopping-cart"></i>
                            <span>주문 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#members" class="nav-link" data-section="members">
                            <i class="fas fa-users"></i>
                            <span>회원 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#sales" class="nav-link" data-section="sales">
                            <i class="fas fa-won-sign"></i>
                            <span>매출 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#reviews" class="nav-link" data-section="reviews">
                            <i class="fas fa-star"></i>
                            <span>후기 관리</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            <span>사이트 설정</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 메인 콘텐츠 -->
        <main class="admin-main">
            <!-- 대시보드 섹션 -->
            <section id="dashboard" class="admin-section active">
                <div class="section-header">
                    <h2>대시보드</h2>
                    <div class="dashboard-controls">
                        <button class="btn-dashboard-settings" onclick="toggleDashboardSettings()">
                            <i class="fas fa-cog"></i> 위젯 설정
                        </button>
                        <button class="btn-add-widget" onclick="showAddWidgetPanel()">
                            <i class="fas fa-plus"></i> 위젯 추가
                        </button>
                    </div>
                </div>

                <!-- 대시보드 설정 패널 -->
                <div id="dashboardSettings" class="dashboard-settings hidden">
                    <div class="settings-header">
                        <h3>대시보드 위젯 관리</h3>
                        <button class="settings-close" onclick="toggleDashboardSettings()">×</button>
                    </div>
                    <div class="settings-content">
                        <p>위젯을 드래그하여 순서를 변경하거나 체크박스로 표시/숨김을 설정하세요.</p>
                        <div class="widget-list" id="widgetSettingsList">
                            <!-- 동적으로 생성됨 -->
                        </div>
                        <div class="settings-actions">
                            <button class="btn btn-secondary" onclick="resetDashboard()">기본값 복원</button>
                            <button class="btn btn-primary" onclick="saveDashboardSettings()">설정 저장</button>
                        </div>
                    </div>
                </div>

                <!-- 대시보드 위젯 컨테이너 -->
                <div class="dashboard-widgets" id="dashboardWidgets">
                    <!-- 위젯들이 동적으로 생성됨 -->
                </div>

            </section>

            <!-- 강의 관리 섹션 -->
            <section id="courses" class="admin-section">
                <div class="section-header">
                    <h2>강의 관리</h2>
                    <button class="btn btn-primary" id="addCourseBtn">
                        <i class="fas fa-plus"></i> 새 강의 추가
                    </button>
                </div>

                <div class="table-container">
                    <table class="admin-table" id="coursesTable">
                        <thead>
                            <tr>
                                <th>강의명</th>
                                <th>카테고리</th>
                                <th>가격</th>
                                <th>수강생</th>
                                <th>상태</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 동적으로 생성됨 -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 주문 관리 섹션 -->
            <section id="orders" class="admin-section">
                <div class="section-header">
                    <h2>주문 관리</h2>
                    <div class="section-filters">
                        <select class="filter-select">
                            <option value="all">모든 상태</option>
                            <option value="pending">결제 대기</option>
                            <option value="completed">결제 완료</option>
                            <option value="cancelled">취소됨</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="admin-table" id="ordersTable">
                        <thead>
                            <tr>
                                <th>주문번호</th>
                                <th>고객명</th>
                                <th>강의명</th>
                                <th>금액</th>
                                <th>상태</th>
                                <th>주문일</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 동적으로 생성됨 -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 회원 관리 섹션 -->
            <section id="members" class="admin-section">
                <div class="section-header">
                    <h2>회원 관리</h2>
                    <div class="section-filters">
                        <input type="text" class="search-input" placeholder="회원 검색..." id="memberSearch">
                        <select class="filter-select" id="memberRoleFilter">
                            <option value="all">모든 등급</option>
                            <option value="admin">관리자</option>
                            <option value="premium">프리미엄</option>
                            <option value="user">일반 회원</option>
                        </select>
                        <select class="filter-select" id="memberChannelFilter">
                            <option value="all">모든 채널</option>
                            <option value="direct">직접 유입</option>
                            <option value="google_cpc">구글 광고</option>
                            <option value="google_organic">구글 검색</option>
                            <option value="naver_blog">네이버 블로그</option>
                            <option value="facebook">페이스북</option>
                            <option value="instagram">인스타그램</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="admin-table" id="membersTable">
                        <thead>
                            <tr>
                                <th>회원 정보</th>
                                <th>가입일</th>
                                <th>구매 강의</th>
                                <th>총 결제금액</th>
                                <th>마케팅 채널</th>
                                <th>등급</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 동적으로 생성됨 -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="sales" class="admin-section">
                <div class="section-header">
                    <h2>매출 관리</h2>
                </div>
                <p>매출 분석 기능을 개발 중입니다...</p>
            </section>

            <section id="reviews" class="admin-section">
                <div class="section-header">
                    <h2>후기 관리</h2>
                </div>
                <p>후기 관리 기능을 개발 중입니다...</p>
            </section>

            <section id="settings" class="admin-section">
                <div class="section-header">
                    <h2>사이트 설정</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="openContentEditor()">
                            <i class="fas fa-edit"></i> 콘텐츠 편집
                        </button>
                        <button class="btn btn-secondary" onclick="openThemeSettings()">
                            <i class="fas fa-palette"></i> 테마 설정
                        </button>
                    </div>
                </div>

                <div class="settings-grid">
                    <div class="settings-card">
                        <div class="settings-card-header">
                            <i class="fas fa-home"></i>
                            <h3>메인 페이지</h3>
                        </div>
                        <div class="settings-card-content">
                            <p>홈페이지 배너, 강의 소개, 기업교육 섹션을 편집합니다.</p>
                            <button class="btn btn-outline" onclick="editPage('home')">편집하기</button>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-header">
                            <i class="fas fa-graduation-cap"></i>
                            <h3>강의 관리</h3>
                        </div>
                        <div class="settings-card-content">
                            <p>강의 카테고리, 가격 정책, 할인 설정을 관리합니다.</p>
                            <button class="btn btn-outline" onclick="editPage('courses')">설정하기</button>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-header">
                            <i class="fas fa-building"></i>
                            <h3>기업교육</h3>
                        </div>
                        <div class="settings-card-content">
                            <p>기업교육 프로그램 소개 및 문의 양식을 설정합니다.</p>
                            <button class="btn btn-outline" onclick="editPage('enterprise')">편집하기</button>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-header">
                            <i class="fas fa-cog"></i>
                            <h3>일반 설정</h3>
                        </div>
                        <div class="settings-card-content">
                            <p>사이트 제목, 연락처, 소셜 미디어 링크를 설정합니다.</p>
                            <button class="btn btn-outline" onclick="editPage('general')">설정하기</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 강의 추가/편집 모달 -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">새 강의 추가</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="courseForm" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="courseName">강의명</label>
                        <input type="text" id="courseName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="courseCategory">카테고리</label>
                        <select id="courseCategory" name="category" required>
                            <option value="">선택하세요</option>
                            <option value="프롬프트 엔지니어링">프롬프트 엔지니어링</option>
                            <option value="비즈니스 AI">비즈니스 AI</option>
                            <option value="AI 마케팅">AI 마케팅</option>
                            <option value="AI 리더십">AI 리더십</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="coursePrice">가격 (원)</label>
                        <input type="number" id="coursePrice" name="price" required>
                    </div>
                    <div class="form-group">
                        <label for="courseDiscount">할인률 (%)</label>
                        <input type="number" id="courseDiscount" name="discount" min="0" max="100">
                    </div>
                </div>
                <div class="form-group">
                    <label for="courseDescription">강의 설명</label>
                    <textarea id="courseDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="courseImage">강의 이미지 URL</label>
                    <input type="url" id="courseImage" name="image" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">취소</button>
                    <button type="submit" class="btn btn-primary">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 회원 상세 정보 모달 -->
    <div id="memberDetailModal" class="modal">
        <div class="modal-content member-modal">
            <div class="modal-header">
                <h3 id="memberModalTitle">회원 상세 정보</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="member-info-grid">
                    <div class="member-basic-info">
                        <h4>기본 정보</h4>
                        <div class="info-item">
                            <label>이름:</label>
                            <span id="memberName">-</span>
                        </div>
                        <div class="info-item">
                            <label>이메일:</label>
                            <span id="memberEmail">-</span>
                        </div>
                        <div class="info-item">
                            <label>전화번호:</label>
                            <span id="memberPhone">-</span>
                        </div>
                        <div class="info-item">
                            <label>회사:</label>
                            <span id="memberCompany">-</span>
                        </div>
                        <div class="info-item">
                            <label>직책:</label>
                            <span id="memberPosition">-</span>
                        </div>
                        <div class="info-item">
                            <label>가입일:</label>
                            <span id="memberJoinDate">-</span>
                        </div>
                        <div class="info-item">
                            <label>마케팅 채널:</label>
                            <span id="memberChannel">-</span>
                        </div>
                    </div>
                    <div class="member-purchase-info">
                        <h4>구매 정보</h4>
                        <div class="info-item">
                            <label>총 결제금액:</label>
                            <span id="memberTotalAmount" class="amount">₩0</span>
                        </div>
                        <div class="info-item">
                            <label>구매 강의 수:</label>
                            <span id="memberCourseCount">0개</span>
                        </div>
                    </div>
                </div>
                
                <div class="member-courses-section">
                    <h4>구매 강의 목록</h4>
                    <div class="courses-list" id="memberCoursesList">
                        <!-- 동적으로 생성됨 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 수강률 상세 모달 -->
    <div id="courseProgressModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="courseProgressTitle">수강률 상세</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="progress-info">
                    <div class="progress-header">
                        <h4 id="progressCourseName">-</h4>
                        <span id="progressPercentage" class="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    <div class="progress-details">
                        <div class="detail-item">
                            <label>구매일:</label>
                            <span id="progressPurchaseDate">-</span>
                        </div>
                        <div class="detail-item">
                            <label>결제 금액:</label>
                            <span id="progressAmount">₩0</span>
                        </div>
                        <div class="detail-item">
                            <label>결제 방법:</label>
                            <span id="progressPaymentMethod">-</span>
                        </div>
                        <div class="detail-item">
                            <label>마지막 수강일:</label>
                            <span id="progressLastAccess">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 콘텐츠 편집 모달 -->
    <div id="contentEditorModal" class="modal">
        <div class="modal-content content-editor-modal">
            <div class="modal-header">
                <h3 id="editorModalTitle">콘텐츠 편집</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="editor-tabs">
                    <button class="editor-tab active" data-tab="visual">시각적 편집</button>
                    <button class="editor-tab" data-tab="code">HTML 편집</button>
                </div>
                
                <div class="editor-content">
                    <div id="visualEditor" class="editor-panel active">
                        <div class="editor-toolbar">
                            <button class="editor-btn" onclick="formatText('bold')"><i class="fas fa-bold"></i></button>
                            <button class="editor-btn" onclick="formatText('italic')"><i class="fas fa-italic"></i></button>
                            <button class="editor-btn" onclick="formatText('underline')"><i class="fas fa-underline"></i></button>
                            <div class="editor-separator"></div>
                            <button class="editor-btn" onclick="formatText('insertUnorderedList')"><i class="fas fa-list-ul"></i></button>
                            <button class="editor-btn" onclick="formatText('insertOrderedList')"><i class="fas fa-list-ol"></i></button>
                            <div class="editor-separator"></div>
                            <button class="editor-btn" onclick="insertImage()"><i class="fas fa-image"></i></button>
                            <button class="editor-btn" onclick="insertLink()"><i class="fas fa-link"></i></button>
                        </div>
                        <div class="editor-area" contenteditable="true" id="editableContent">
                            <!-- 편집 가능한 콘텐츠가 여기에 로드됩니다 -->
                        </div>
                    </div>
                    
                    <div id="codeEditor" class="editor-panel">
                        <textarea id="htmlEditor" placeholder="HTML 코드를 입력하세요..."></textarea>
                    </div>
                </div>
                
                <div class="editor-actions">
                    <button class="btn btn-outline" onclick="previewContent()">미리보기</button>
                    <button class="btn btn-secondary" onclick="closeContentEditor()">취소</button>
                    <button class="btn btn-primary" onclick="saveContent()">저장</button>
                </div>
            </div>
        </div>
    </div>

    <script src="user-manager.js"></script>
    <script src="admin.js"></script>
</body>
</html>